---
description: Roo Code 3.21 launches the Roo Marketplace, adds Gemini 2.5 models support, Claude Max subscription integration, and Excel file support.
keywords:
  - Roo Code 3.21
  - release notes
  - Roo Marketplace
  - Gemini 2.5
  - Claude Max
  - Excel support
image: /img/social-share.jpg
---

# Roo Code 3.21 Release Notes

This release launches the Roo Marketplace, adds support for the latest Gemini 2.5 models, and introduces Excel file support along with numerous improvements and fixes.

## [Roo Marketplace Launch](/features/marketplace)

We're excited to announce the official launch of the [Roo Marketplace](/features/marketplace) ([#4788](https://github.com/RooCodeInc/Roo-Code/pull/4788)):

- **Discover Great MCPs and Modes**: Browse and install community-created Model Context Protocol servers and custom modes directly from within Roo Code
- **Seamless Integration**: The marketplace is now available to all users without needing experimental features
- **Easy Installation**: Find and install the tools you need with just a few clicks

The Roo Marketplace makes it easy to extend Roo Code's functionality with powerful integrations created by our vibrant community.

## Use Your Claude Max Subscription with Roo Code

You can now use your Claude Max subscription directly in Roo Code through our new [Claude Code provider](/providers/claude-code) (thanks Cline!) ([#4864](https://github.com/RooCodeInc/Roo-Code/pull/4864), [#5038](https://github.com/RooCodeInc/Roo-Code/pull/5038)):

- **Leverage Your Existing Subscription**: Connect your Claude Max plan to Roo Code through the Claude CLI
- **No Additional API Costs**: Use your subscription benefits instead of paying per-token API rates
- **Access Premium Models**: Use Claude Sonnet 4, Opus 4, and other advanced models included in your plan
- **Zero Setup Complexity**: Select Claude Code as your provider during initial setup - no API keys needed
- **Advanced Reasoning Support**: Full access to Claude's thinking modes and reasoning capabilities

Perfect for Claude Max subscribers who want to maximize their subscription value while coding.

## [Gemini 2.5 Models Support](https://blog.google/products/gemini/gemini-2-5-model-family-expands/)

We've added support for [Google's latest Gemini 2.5 models](https://blog.google/products/gemini/gemini-2-5-model-family-expands/) ([#4762](https://github.com/RooCodeInc/Roo-Code/pull/4762), [#4770](https://github.com/RooCodeInc/Roo-Code/pull/4770), [#4767](https://github.com/RooCodeInc/Roo-Code/pull/4767)):

- **Gemini 2.5 Pro**: Enhanced capabilities for complex coding tasks
- **Gemini 2.5 Flash**: Fast model with improved performance
- **Gemini 2.5 Flash Lite**: Lightweight model perfect for quick tasks

These new models bring enhanced reasoning capabilities and better performance across various coding tasks.

## Excel File Support

Added support for reading Excel (.xlsx) files in tools ([#4751](https://github.com/RooCodeInc/Roo-Code/pull/4751)). You can now:

- **Read Excel Files**: Directly analyze and work with Excel spreadsheets
- **Extract Data**: Access cell values, formulas, and sheet information
- **Seamless Integration**: Works with all existing Roo Code tools and features

## New Features

* **LaTeX Rendering**: You can now render LaTeX math equations directly in the chat window (thanks ColbySerpa!) ([#4786](https://github.com/RooCodeInc/Roo-Code/pull/4786))
* **MCP Tool Toggle**: A new toggle allows you to disable individual MCP server tools from being included in the prompt context (thanks Rexarrior!) ([#3551](https://github.com/RooCodeInc/Roo-Code/pull/3551))
* **Symlink Support**: The `list_files` tool now supports symbolic links (thanks josh-clanton-powerschool!) ([#4859](https://github.com/RooCodeInc/Roo-Code/pull/4859))

## QOL Improvements

*   **Profile-Specific Context Thresholds**: You can now configure different intelligent context condensing thresholds for each of your API configuration profiles. This gives you more granular control over context management, which is especially useful when working with multiple models that have different context window sizes (thanks SannidhyaSah, SirBadfish!) ([#4456](https://github.com/RooCodeInc/Roo-Code/pull/4456)).
* **Onboarding**: Made some tweaks to the onboarding process to better emphasize modes ([#4791](https://github.com/RooCodeInc/Roo-Code/pull/4791))
* **Task Orchestration**: Renamed "Boomerang Tasks" to "Task Orchestration" to improve clarity ([#4856](https://github.com/RooCodeInc/Roo-Code/pull/4856))
* **`attempt_completion`**: The `attempt_completion` tool no longer executes commands. This is a permanent change and the experimental setting has been removed. ([#4884](https://github.com/RooCodeInc/Roo-Code/pull/4884))
* **OpenAI Compatible Max Tokens**: Added checkbox option for max tokens in OpenAI compatible provider settings ([#4600](https://github.com/RooCodeInc/Roo-Code/pull/4600), [#4623](https://github.com/RooCodeInc/Roo-Code/pull/4623))
* **Provider Updates**: Updated model lists and pricing for Groq & Mistral ([#4798](https://github.com/RooCodeInc/Roo-Code/pull/4798), [#4797](https://github.com/RooCodeInc/Roo-Code/pull/4797))
* **Terminal Details**: Now includes current working directory for better context awareness ([#4783](https://github.com/RooCodeInc/Roo-Code/pull/4783))
* **Multi-file Diff**: Encourages use of start_line parameter to match legacy diff behavior ([#4777](https://github.com/RooCodeInc/Roo-Code/pull/4777))

## UI/UX Improvements

* **Marketplace Branding**: Updated to show "Roo Marketplace" for consistent branding ([#4718](https://github.com/RooCodeInc/Roo-Code/pull/4718))
* **History UI**: Refactored to more consistent and modern interface ([#4598](https://github.com/RooCodeInc/Roo-Code/pull/4598))
* **Context Menu**: Adjusted positioning to be near GitHub Copilot for easier access ([#4306](https://github.com/RooCodeInc/Roo-Code/pull/4306))
* **Panel Focus**: Always focus the panel when clicked to ensure menu buttons are visible ([#4312](https://github.com/RooCodeInc/Roo-Code/pull/4312))

## Bug Fixes

* **Qdrant Vector Store**: Fixed URL prefix handling during QdrantClient initialization for deployments with path prefixes (thanks CW-B-W!) ([#5033](https://github.com/RooCodeInc/Roo-Code/pull/5033))
* **Claude Code Provider**: Resolved JSON parsing issues and improved reasoning block display to show collapsible reasoning blocks instead of raw JSON ([#5049](https://github.com/RooCodeInc/Roo-Code/pull/5049))
* **LM Studio**: Improved model detection to display all downloaded models instead of only currently loaded models (thanks daniel-lxs!) ([#5047](https://github.com/RooCodeInc/Roo-Code/pull/5047))
* **Apply Diff Accuracy**: Fixed start line parameter not working correctly when applying multiple file diffs (thanks samhvw8!) ([#5019](https://github.com/RooCodeInc/Roo-Code/pull/5019))
* **Ollama Compatibility**: Resolved validation errors that prevented Ollama from working with certain models (thanks daniel-lxs, MartinHarding1998!) ([#5014](https://github.com/RooCodeInc/Roo-Code/pull/5014))
*   **Ollama & LM Studio Context Length**: The context length for models served by Ollama and LM Studio is now automatically detected and displayed correctly, so you no longer need to configure it manually (thanks thecolorblue, Fade78!) ([#4314](https://github.com/RooCodeInc/Roo-Code/pull/4314)).
*   **MCP Tool UI**: Resolved an issue where the eye icon for MCP tools was showing the incorrect state and was visible in chat contexts where it should have been hidden (thanks daniel-lxs!) ([#4994](https://github.com/RooCodeInc/Roo-Code/pull/4994)).
* **Marketplace**: Fixed an issue where the marketplace would go blank after being populated and resolved timeout issues (thanks yangbinbin48!) ([#4941](https://github.com/RooCodeInc/Roo-Code/pull/4941))
* **@mention**: Fixed an issue with recursive directory scanning when using "Add Folder" with @mention (thanks village-way!) ([#4863](https://github.com/RooCodeInc/Roo-Code/pull/4863))
* **Subtasks**: Resolved an issue where a phantom "Subtask Results" would display if a task was cancelled during an API retry. ([#4893](https://github.com/RooCodeInc/Roo-Code/pull/4893))
* **Pricing**: Corrected the pricing for the Gemini 2.5 Flash model (thanks sr-tream!) ([#4898](https://github.com/RooCodeInc/Roo-Code/pull/4898))
* **Markdown**: Fixed an issue with markdown rendering for links that are followed by punctuation. ([#4841](https://github.com/RooCodeInc/Roo-Code/pull/4841))
* **Parser Reliability**: Fixed an issue that could prevent the parser from loading correctly in certain environments, improving overall stability ([#4857](https://github.com/RooCodeInc/Roo-Code/pull/4857))
* **Windows Stability**: Resolved a crash that could occur when using MCP servers on Windows with node version managers ([#4711](https://github.com/RooCodeInc/Roo-Code/pull/4711))
* **Subtask Rate Limiting**: Implemented global rate-limiting to prevent errors when creating subtasks, ensuring more reliable task execution ([#4453](https://github.com/RooCodeInc/Roo-Code/pull/4453))
* **Codebase Search Errors**: Improved error messages for codebase search, making it easier to diagnose and resolve issues with embeddings ([#4432](https://github.com/RooCodeInc/Roo-Code/pull/4432))
* **API Conversation History**: Added proper error handling for conversation history issues ([#4741](https://github.com/RooCodeInc/Roo-Code/pull/4741), [#4738](https://github.com/RooCodeInc/Roo-Code/pull/4738))
* **Model ID Errors**: Fixed ambiguous model ID error messages ([#4709](https://github.com/RooCodeInc/Roo-Code/pull/4709), [#4710](https://github.com/RooCodeInc/Roo-Code/pull/4710))
* **Prompt Settings**: Fixed save/discard/revert flow for Prompt Settings ([#4623](https://github.com/RooCodeInc/Roo-Code/pull/4623), [#4312](https://github.com/RooCodeInc/Roo-Code/pull/4312))
* **Codebase Indexing**: Fixed alignment with list-files hidden directory filtering ([#4684](https://github.com/RooCodeInc/Roo-Code/pull/4684))
* **Subtask Completion**: Fixed mismatch between subtask and overall task completion ([#4656](https://github.com/RooCodeInc/Roo-Code/pull/4656))
* **Windows MCP Configuration**: Fixed path normalization in MCP variable injection on Windows ([#4607](https://github.com/RooCodeInc/Roo-Code/pull/4607))

## Misc Improvements

* **Anthropic Cost Tracking**: Improved the accuracy of cost reporting for Anthropic models ([#4849](https://github.com/RooCodeInc/Roo-Code/pull/4849))
* **Performance Optimization**: The "Enable MCP Server Creation" setting is now disabled by default, reducing token usage and simplifying prompts for most users ([#4838](https://github.com/RooCodeInc/Roo-Code/pull/4838))
* **Security**: Addressed security vulnerabilities by updating dependencies ([#4844](https://github.com/RooCodeInc/Roo-Code/pull/4844))
* **Test Mode Update**: Updated test mode to support Vitest testing framework ([#4778](https://github.com/RooCodeInc/Roo-Code/pull/4778))
* **Working Directory Warning**: Removed unnecessary warning about working directory changes ([#4795](https://github.com/RooCodeInc/Roo-Code/pull/4795))
* **Telemetry**: Added marketplace tab view and install click tracking ([#4781](https://github.com/RooCodeInc/Roo-Code/pull/4781))
* **Windows Docker**: Updated evals Docker setup to work on Windows ([#4467](https://github.com/RooCodeInc/Roo-Code/pull/4467))